name: Telegram Notificator
on: [push]
jobs:
  build:
    - name: Dump GitHub context
      env:
        GITHUB_CONTEXT: ${{ toJson(github) }}
      run: echo "$GITHUB_CONTEXT"
    - name: Push
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@master
        - name: Telegram Notification
          uses: appleboy/telegram-action@master
          with:
            to: ${{ secrets.TELEGRAM_TO }}
            token: ${{ secrets.TELEGRAM_TOKEN }}
            format: html
            message: |
              <b><a href="https://github.com/${{ github.repository }}">New GitHub Notification</a></b>

              <b>Repo</b>: ${{ github.repository }}
              <b>Event:</b> <code>${{ github.event_name }}</code>
              <b>Author:</b> <code>${{ github.actor }}</code>
              <b>Summary:</b> <code>${{ github.event.head_commit.message }}</code>
              <b>Description:</b> <code>${{ github.event.head_commit.desc }}</code>

              <a href="https://github.com/${{ github.repository }}/commit/${{ commit.sha }}">Commit</a> | <a href="https://github.com/${{ github.repository }}">Repo</a> | <a href="https://bsba.uz">Home</a>